{"version":3,"sources":["../../src/lib/plugin-manager.js"],"names":[],"mappings":";;;;;;;;AAAA,IAAM,UAAU,QAAQ,UAAR,CAAhB;;AAEA,OAAO,OAAP;AACE,2BAAc;AAAA;;AACZ,SAAK,OAAL,GAAe,EAAf;AACA,SAAK,OAAL,GAAe,EAAf;AACA,SAAK,KAAL,GAAa,EAAb;AACD;;AALH;AAAA;AAAA,mCAOiB,MAPjB,EAOyB;AACrB,UAAG,CAAC,KAAK,OAAL,CAAa,OAAO,IAApB,CAAJ,EAA+B;AAC7B,eAAO,QAAP,CAAgB,IAAhB;AACA,aAAK,OAAL,CAAa,OAAO,IAApB,IAA4B,MAA5B;AACD;AACF;AAZH;AAAA;AAAA,wCAcsB;AAAA;;AAClB,UAAM,YAAY,OACjB,IADiB,CACZ,KAAK,OADO,EAEjB,GAFiB,CAEb,UAAC,MAAD;AAAA,eAAY,MAAK,OAAL,CAAa,MAAb,EAAqB,UAArB,EAAZ;AAAA,OAFa,CAAlB;AAGA,aAAO,QAAQ,GAAR,CAAY,SAAZ,CAAP;AACD;AAnBH;AAAA;AAAA,4BAqBU,MArBV,EAqBkB,SArBlB,EAqB6B,IArB7B,EAqBmC;AAAA;;AAC/B,UAAM,IAAI,KAAK,OAAL,CAAa,MAAb,CAAV;AACA,aAAO,kBAAE,SAAF,GAAa,IAAb,sBAAkB,CAAlB,4BAAwB,IAAxB,GAAP;AACD;AAxBH;AAAA;AAAA,6BA0BW,IA1BX,EA0BiB;AACb,WAAK,KAAL,GAAa,OAAO,MAAP,CAAc,KAAK,KAAnB,EAA0B,IAA1B,CAAb;AACD;AA5BH;;AAAA;AAAA","file":"plugin-manager.js","sourcesContent":["const Promise = require('bluebird');\n\nmodule.exports = class PluginManager {\n  constructor() {\n    this.session = {};\n    this.plugins = {};\n    this.saved = {};\n  }\n\n  registerPlugin(plugin) {\n    if(!this.plugins[plugin.type]) {\n      plugin.register(this);\n      this.plugins[plugin.type] = plugin;\n    }\n  }\n\n  initializePlugins() {\n    const initCalls = Object\n    .keys(this.plugins)\n    .map((plugin) => this.plugins[plugin].initialize());\n    return Promise.all(initCalls);\n  }\n\n  execute(plugin, operation, args) {\n    const p = this.plugins[plugin];\n    return p[operation].call(p, ...args)\n  }\n\n  saveRefs(refs) {\n    this.saved = Object.assign(this.saved, refs);\n  }\n};\n"]}