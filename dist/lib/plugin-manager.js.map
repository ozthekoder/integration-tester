{"version":3,"sources":["../../src/lib/plugin-manager.js"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,IAAM,UAAU,QAAQ,UAAR,CAAhB;;IAEqB,a;AACnB,2BAAc;AAAA;;AACZ,SAAK,OAAL,GAAe,EAAf;AACA,SAAK,OAAL,GAAe,EAAf;AACA,SAAK,KAAL,GAAa,EAAb;AACD;;;;mCAEc,M,EAAQ;AACrB,UAAG,CAAC,KAAK,OAAL,CAAa,OAAO,IAApB,CAAJ,EAA+B;AAC7B,eAAO,QAAP,CAAgB,IAAhB;AACA,aAAK,OAAL,CAAa,OAAO,IAApB,IAA4B,MAA5B;AACD;AACF;;;wCAEmB;AAAA;;AAClB,UAAM,YAAY,OACjB,IADiB,CACZ,KAAK,OADO,EAEjB,GAFiB,CAEb,UAAC,MAAD;AAAA,eAAY,MAAK,OAAL,CAAa,MAAb,EAAqB,UAArB,EAAZ;AAAA,OAFa,CAAlB;AAGA,aAAO,kBAAQ,GAAR,CAAY,SAAZ,CAAP;AACD;;;4BAEO,M,EAAQ,S,EAAW,I,EAAM;AAAA;;AAC/B,UAAM,IAAI,KAAK,OAAL,CAAa,MAAb,CAAV;AACA,aAAO,kBAAE,SAAF,GAAa,IAAb,sBAAkB,CAAlB,4BAAwB,IAAxB,GAAP;AACD;;;6BAEQ,I,EAAM;AACb,WAAK,KAAL,GAAa,OAAO,MAAP,CAAc,KAAK,KAAnB,EAA0B,IAA1B,CAAb;AACD;;;;;;kBA5BkB,a;AA6BpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCA7BoB,a,yCAAA,a;;;wBAAA,a;;;;;;;wGAAA,a","file":"plugin-manager.js","sourcesContent":["const Promise = require('bluebird');\n\nexport default class PluginManager {\n  constructor() {\n    this.session = {};\n    this.plugins = {};\n    this.saved = {};\n  }\n\n  registerPlugin(plugin) {\n    if(!this.plugins[plugin.type]) {\n      plugin.register(this);\n      this.plugins[plugin.type] = plugin;\n    }\n  }\n\n  initializePlugins() {\n    const initCalls = Object\n    .keys(this.plugins)\n    .map((plugin) => this.plugins[plugin].initialize());\n    return Promise.all(initCalls);\n  }\n\n  execute(plugin, operation, args) {\n    const p = this.plugins[plugin];\n    return p[operation].call(p, ...args)\n  }\n\n  saveRefs(refs) {\n    this.saved = Object.assign(this.saved, refs);\n  }\n};\n"]}