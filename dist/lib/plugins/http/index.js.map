{"version":3,"sources":["../../../../src/lib/plugins/http/index.js"],"names":[],"mappings":";;;;;;;;;;;AAEA;;;;;;;;AAFA,IAAM,aAAa,QAAQ,YAAR,CAAnB;AACA,IAAM,eAAe,QAAQ,wBAAR,CAArB;;AAEA,IAAM,SAAS,QAAQ,WAAR,CAAf;AACA,IAAM,UAAU,QAAQ,UAAR,CAAhB;AACA,IAAM,IAAI,QAAQ,kBAAR,CAAV;;AAEA;;AAEA,OAAO,OAAP;AAAA;;AACE,wBAAc;AAAA;;AAAA,8FACN,MADM;;AAEZ,UAAK,SAAL;AAFY;AAGb;;AAJH;AAAA;AAAA,iCAMe;AACX,aAAO,kBAAQ,OAAR,CAAgB,IAAhB,CAAP;AACD;AARH;AAAA;AAAA,wBAUM,QAVN,EAU8B;AAAA,UAAd,OAAc,yDAAJ,EAAI;AAAA,UAClB,OADkB,GACN,KAAK,OADC,CAClB,OADkB;;;AAG1B,UAAI,QAAQ,MAAZ,EAAoB;AAClB,gBAAQ,MAAR,GAAiB,QAAQ,MAAzB;AACD;;AAED,UAAI,QAAQ,SAAZ,EAAuB;AACrB,gBAAQ,aAAR,IAAyB,QAAQ,SAAjC;AACD;;AAED,aAAO,qBACN,GADM,MACC,oBAAU,QAAV,CADD,EAEN,GAFM,CAEF,OAFE,CAAP;AAGD;AAxBH;AAAA;AAAA,yBA0BO,QA1BP,EA0B0C;AAAA,UAAzB,OAAyB,yDAAf,EAAe;AAAA,UAAX,IAAW,yDAAJ,EAAI;AAAA,UAC9B,OAD8B,GAClB,KAAK,OADa,CAC9B,OAD8B;;;AAGtC,UAAI,QAAQ,MAAZ,EAAoB;AAClB,gBAAQ,MAAR,GAAiB,QAAQ,MAAzB;AACD;;AAED,UAAI,QAAQ,SAAZ,EAAuB;AACrB,gBAAQ,aAAR,IAAyB,QAAQ,SAAjC;AACD;;AAED,aAAO,qBACN,IADM,MACE,oBAAU,QAAV,CADF,EAEN,GAFM,CAEF,OAFE,EAGN,IAHM,CAGD,IAHC,CAAP;AAID;AAzCH;AAAA;AAAA,wBA2CM,QA3CN,EA2CyC;AAAA,UAAzB,OAAyB,yDAAf,EAAe;AAAA,UAAX,IAAW,yDAAJ,EAAI;AAAA,UAC7B,OAD6B,GACjB,KAAK,OADY,CAC7B,OAD6B;;;AAGrC,UAAI,QAAQ,MAAZ,EAAoB;AAClB,gBAAQ,MAAR,GAAiB,QAAQ,MAAzB;AACD;;AAED,UAAI,QAAQ,SAAZ,EAAuB;AACrB,gBAAQ,aAAR,IAAyB,QAAQ,SAAjC;AACD;;AAED,aAAO,qBACN,GADM,MACC,oBAAU,QAAV,CADD,EAEN,GAFM,CAEF,OAFE,EAGN,IAHM,CAGD,IAHC,CAAP;AAKD;AA3DH;AAAA;AAAA,4BA6DS,QA7DT,EA6DiC;AAAA,UAAd,OAAc,yDAAJ,EAAI;AAAA,UACrB,OADqB,GACT,KAAK,OADI,CACrB,OADqB;;AAE7B,UAAI,QAAQ,MAAZ,EAAoB;AAClB,gBAAQ,MAAR,GAAiB,QAAQ,MAAzB;AACD;;AAED,UAAI,QAAQ,SAAZ,EAAuB;AACrB,gBAAQ,aAAR,IAAyB,QAAQ,SAAjC;AACD;;AAED,aAAO,qBACN,GADM,MACC,oBAAU,QAAV,CADD,EAEN,GAFM,CAEF,OAFE,CAAP;AAGD;AA1EH;;AAAA;AAAA","file":"index.js","sourcesContent":["const superagent = require('superagent');\nconst saaspromised = require('superagent-as-promised');\nimport { createURL } from '../../utility';\nconst Plugin = require('../plugin');\nconst Promise = require('bluebird');\nconst i = require('./interface.json');\n\nsaaspromised(superagent);\n\nmodule.exports = class HttpPlugin extends Plugin {\n  constructor() {\n    super('http');\n    this.interface = i;\n  }\n\n  initialize() {\n    return Promise.resolve(this);\n  }\n\n  get(endpoint, headers = {}) {\n    const { session } = this.context;\n\n    if (session.cookie) {\n      headers.cookie = session.cookie;\n    }\n\n    if (session.userToken) {\n      headers['x-ohcm-user'] = session.userToken;\n    }\n\n    return superagent\n    .get(`${createURL(endpoint)}`)\n    .set(headers);\n  }\n\n  post(endpoint, headers = {}, body = {}) {\n    const { session } = this.context;\n\n    if (session.cookie) {\n      headers.cookie = session.cookie;\n    }\n\n    if (session.userToken) {\n      headers['x-ohcm-user'] = session.userToken;\n    }\n\n    return superagent\n    .post(`${createURL(endpoint)}`)\n    .set(headers)\n    .send(body);\n  }\n\n  put(endpoint, headers = {}, body = {}) {\n    const { session } = this.context;\n\n    if (session.cookie) {\n      headers.cookie = session.cookie;\n    }\n\n    if (session.userToken) {\n      headers['x-ohcm-user'] = session.userToken;\n    }\n\n    return superagent\n    .put(`${createURL(endpoint)}`)\n    .set(headers)\n    .send(body);\n\n  }\n\n  delete(endpoint, headers = {}) {\n    const { session } = this.context;\n    if (session.cookie) {\n      headers.cookie = session.cookie;\n    }\n\n    if (session.userToken) {\n      headers['x-ohcm-user'] = session.userToken;\n    }\n\n    return superagent\n    .del(`${createURL(endpoint)}`)\n    .set(headers);\n  }\n}\n"]}