{"version":3,"sources":["../../../../src/lib/plugins/http/index.js"],"names":[],"mappings":";;;;;;AAAA;;;;;;;;AACA,IAAM,aAAa,QAAQ,YAAR,CAAnB;AACA,IAAM,eAAe,QAAQ,wBAAR,CAArB;AACA,IAAM,SAAS,QAAQ,WAAR,CAAf;AACA,IAAM,UAAU,QAAQ,UAAR,CAAhB;AACA,IAAM,IAAI,QAAQ,kBAAR,CAAV;;AAEA;;IAEM,U;;;AACJ,sBAAY,MAAZ,EAAoB;AAAA;;AAAA;;AAElB,UAAK,MAAL,GAAc,MAAd;AACA,UAAK,SAAL;AAHkB;AAInB;;;;iCAEY;AACX,aAAO,kBAAQ,OAAR,CAAgB,IAAhB,CAAP;AACD;;;wBAEG,Q,EAAwB;AAAA,UAAd,OAAc,yDAAJ,EAAI;AAAA,UAClB,OADkB,GACN,KAAK,OADC,CAClB,OADkB;;;AAG1B,aACC,IADD,CACM,OADN,EAEC,OAFD,CAES,UAAC,CAAD;AAAA,eAAO,QAAQ,CAAR,IAAa,QAAQ,CAAR,CAApB;AAAA,OAFT;;AAIA,aAAO,qBACN,GADM,MACC,oBAAU,QAAV,EAAoB,KAAK,MAAzB,CADD,EAEN,GAFM,CAEF,OAFE,CAAP;AAGD;;;yBAEI,Q,EAAmC;AAAA,UAAzB,OAAyB,yDAAf,EAAe;AAAA,UAAX,IAAW,yDAAJ,EAAI;AAAA,UAC9B,OAD8B,GAClB,KAAK,OADa,CAC9B,OAD8B;;;AAGtC,aACC,IADD,CACM,OADN,EAEC,OAFD,CAES,UAAC,CAAD;AAAA,eAAO,QAAQ,CAAR,IAAa,QAAQ,CAAR,CAApB;AAAA,OAFT;;AAIA,aAAO,qBACN,IADM,MACE,oBAAU,QAAV,EAAoB,KAAK,MAAzB,CADF,EAEN,GAFM,CAEF,OAFE,EAGN,IAHM,CAGD,IAHC,CAAP;AAID;;;wBAEG,Q,EAAmC;AAAA,UAAzB,OAAyB,yDAAf,EAAe;AAAA,UAAX,IAAW,yDAAJ,EAAI;AAAA,UAC7B,OAD6B,GACjB,KAAK,OADY,CAC7B,OAD6B;;;AAGrC,aACC,IADD,CACM,OADN,EAEC,OAFD,CAES,UAAC,CAAD;AAAA,eAAO,QAAQ,CAAR,IAAa,QAAQ,CAAR,CAApB;AAAA,OAFT;;AAIA,aAAO,qBACN,GADM,MACC,oBAAU,QAAV,EAAoB,KAAK,MAAzB,CADD,EAEN,GAFM,CAEF,OAFE,EAGN,IAHM,CAGD,IAHC,CAAP;AAKD;;;4BAEM,Q,EAAwB;AAAA,UAAd,OAAc,yDAAJ,EAAI;AAAA,UACrB,OADqB,GACT,KAAK,OADI,CACrB,OADqB;;;AAG7B,aACC,IADD,CACM,OADN,EAEC,OAFD,CAES,UAAC,CAAD;AAAA,eAAO,QAAQ,CAAR,IAAa,QAAQ,CAAR,CAApB;AAAA,OAFT;;AAIA,aAAO,qBACN,GADM,MACC,oBAAU,QAAV,EAAoB,KAAK,MAAzB,CADD,EAEN,GAFM,CAEF,OAFE,CAAP;AAGD;;;;;;AACF;;AAED,qBAAW,IAAX,GAAkB,MAAlB;AACA,OAAO,OAAP","file":"index.js","sourcesContent":["import { createURL } from '../../utility';\nconst superagent = require('superagent');\nconst saaspromised = require('superagent-as-promised');\nconst Plugin = require('../plugin');\nconst Promise = require('bluebird');\nconst i = require('./interface.json');\n\nsaaspromised(superagent);\n\nclass HttpPlugin extends Plugin {\n  constructor(config) {\n    super();\n    this.config = config;\n    this.interface = i;\n  }\n\n  initialize() {\n    return Promise.resolve(this);\n  }\n\n  get(endpoint, headers = {}) {\n    const { session } = this.context;\n\n    Object\n    .keys(session)\n    .forEach((k) => headers[k] = session[k]);\n\n    return superagent\n    .get(`${createURL(endpoint, this.config)}`)\n    .set(headers);\n  }\n\n  post(endpoint, headers = {}, body = {}) {\n    const { session } = this.context;\n\n    Object\n    .keys(session)\n    .forEach((k) => headers[k] = session[k]);\n\n    return superagent\n    .post(`${createURL(endpoint, this.config)}`)\n    .set(headers)\n    .send(body);\n  }\n\n  put(endpoint, headers = {}, body = {}) {\n    const { session } = this.context;\n\n    Object\n    .keys(session)\n    .forEach((k) => headers[k] = session[k]);\n\n    return superagent\n    .put(`${createURL(endpoint, this.config)}`)\n    .set(headers)\n    .send(body);\n\n  }\n\n  delete(endpoint, headers = {}) {\n    const { session } = this.context;\n\n    Object\n    .keys(session)\n    .forEach((k) => headers[k] = session[k]);\n\n    return superagent\n    .del(`${createURL(endpoint, this.config)}`)\n    .set(headers);\n  }\n};\n\nHttpPlugin.type = 'http';\nmodule.exports = HttpPlugin;\n"]}